clickhouse-client --host 10.26.49.20 --port 9000 --user etl --password SmceVqeCuUCQ4el2 -d swan --query "select '' union all SELECT concat('add&^*=',name,'&^*=',replace(arrayElement(splitByString('.event_sessions (',arrayElement(splitByString(') ENGINE = ',create_table_query),1)),2),', \`_sign\` Int8, \`_version\` UInt64, \`_dversion\` UInt64','')) FROM system.tables WHERE database='swan' AND name='event_sessions' UNION ALL SELECT concat('add&^*=',name,'&^*=',replace(arrayElement(splitByString('.token_package_logs (',arrayElement(splitByString(') ENGINE = ',create_table_query),1)),2),', \`_sign\` Int8, \`_version\` UInt64, \`_dversion\` UInt64','')) FROM system.tables WHERE database='swan' AND name='token_package_logs' UNION ALL SELECT concat('add&^*=',name,'&^*=',replace(arrayElement(splitByString('.parse_package_logs (',arrayElement(splitByString(') ENGINE = ',create_table_query),1)),2),', \`_sign\` Int8, \`_version\` UInt64, \`_dversion\` UInt64','')) FROM system.tables WHERE database='swan' AND name='parse_package_logs' UNION ALL SELECT concat('add&^*=',name,'&^*=',replace(arrayElement(splitByString('.token_packages (',arrayElement(splitByString(') ENGINE = ',create_table_query),1)),2),', \`_sign\` Int8, \`_version\` UInt64, \`_dversion\` UInt64','')) FROM system.tables WHERE database='swan' AND name='token_packages' UNION ALL SELECT concat('add&^*=',name,'&^*=',replace(arrayElement(splitByString('.parse_packages (',arrayElement(splitByString(') ENGINE = ',create_table_query),1)),2),', \`_sign\` Int8, \`_version\` UInt64, \`_dversion\` UInt64','')) FROM system.tables WHERE database='swan' AND name='parse_packages' UNION ALL SELECT concat('update&^*=',table,'&^*=',name,'&^*=',concat(type,' ',default_kind,' ',default_expression)) FROM system.columns WHERE database='swan' and ((table = 'event_attendees' AND name in('incr_id', 'session_id', '新增唯一索引(event_id', 'session_id', 'staff_id)', '移除主键(event_id', 'staff_id)', '新增主键(incr_id)')) or(table = 'event_attend_applications' AND name in('session_id', '新增唯一索引(event_id', 'session_id', 'staff_id)', '移除索引(event_id', 'staff_id)')) or(table = 'event_staff' AND name in('session_id', 'quit_at', '新增唯一索引(event_id', 'session_id', 'staff_id)', '移除索引(event_id', 'staff_id)')) or(table = 'flux_packages' AND name in('sub_server_type')) or(table = 'storage_packages' AND name in('sub_server_type')));"